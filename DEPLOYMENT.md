# Инструкция по деплою

## Проблема с кешем

При деплое изменений браузер может кешировать старые версии JS и CSS файлов, из-за чего изменения не применяются.

## Решение

### 1. Автоматическое хеширование

Vite теперь автоматически добавляет хеш к именам файлов:

- `main-abc123.js` вместо `main.js`
- `main-def456.css` вместо `main.css`

При каждом билде хеш меняется, поэтому браузер загружает новый файл.

### 2. Настройки кеша

- **HTML файлы** - НЕ кешируются (всегда свежие)
- **JS/CSS файлы с хешем** - кешируются на 1 год
- **Изображения** - кешируются на 1 год

### 3. Процесс деплоя

```bash
# 1. Собрать проект
npm run build

# 2. Загрузить dist/ на хостинг
# Все файлы с хешем будут автоматически подхватываться
```

### 4. Если проблема остается

#### Решение 1: Очистить кеш хостинга

- На некоторых хостингах (Vercel, Netlify) нужно очистить кеш CDN

#### Решение 2: Использовать версионирование

Добавьте версию в package.json и используйте её в манифесте PWA:

```json
"version": "1.0.0"
```

#### Решение 3: Форсированное обновление PWA

Добавьте version в манифест:

```js
manifest: {
  version: '1.0.0',
  ...
}
```

## Проверка

После деплоя проверьте в DevTools:

1. Network tab - должны загружаться файлы с новыми хешами
2. Application tab - Service Worker должен обновиться
3. Браузер должен автоматически подхватить новый index.html с новыми ссылками на файлы

## Логи деплоя

Если проблема остается, проверьте:

- Загружаются ли файлы с новыми хешами?
- Обновляется ли index.html?
- Работает ли Service Worker?
- Есть ли ошибки в консоли?
